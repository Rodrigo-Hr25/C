#!/bin/bash

# Run script - executes generated program

if [ $# -eq 0 ]; then
    echo "Usage: $0 <generated_file_path>"
    exit 1
fi

GENERATED_FILE="$1"

if [ ! -f "$GENERATED_FILE" ]; then
    echo "Error: File '$GENERATED_FILE' not found"
    exit 1
fi

# Check file extension and run appropriately
EXTENSION="${GENERATED_FILE##*.}"

case "$EXTENSION" in
    "py")
        # Save current directory
        CURRENT_DIR=$(pwd)
        
        # Get the directory of the generated file
        FILE_DIR=$(dirname "$GENERATED_FILE")
        
        # Change to the file's directory and run it
        cd "$FILE_DIR"
        python3 "$(basename "$GENERATED_FILE")"
        
        # Return to original directory
        cd "$CURRENT_DIR"
        ;;
    *)
        echo "Error: Unsupported file type '$EXTENSION'"
        exit 1
        ;;
esac